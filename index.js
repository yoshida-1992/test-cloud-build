const EXECUTE_URL = process.env.EXECUTE_URL
const FORM_URL = process.env.FORM_URL

exports.handler =  function(event, context, callback) {
  // console.log("EVENT: \n" + JSON.stringify(event, null, 2))
  
  let r = 
  '{ \
      "label": "Custom  Action Hub", \
      "integrations": [ \
        { \
          "name": "sendgrid_custom_action_on_aws", \
          "label": "Sendgrid Custom Action (AWS)", \
          "supported_action_types": ["dashboard"], \
          "form_url": "' + FORM_URL + '", \
          "url": "' + EXECUTE_URL + '", \
          "icon_data_uri": "data:image/png;base64,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",  \
          "supported_formats": ["csv_zip"],  \
          "supported_formattings": ["unformatted"], \
          "supported_visualization_formattings": ["noapply"], \
          "supported_download_settings": ["push", "url"] \
        } \
      ] \
    } \
  '
  const res = {
    statusCode: 200,
    headers: {
      'Context-Type': 'application/json'
    },
    body: JSON.stringify(JSON.parse(r))
  }
  callback(null, res);
}
